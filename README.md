<img src="https://github.com/user-attachments/assets/fb7e719e-7353-4649-8ecc-a11058a6c3d6" width="200">

# SYí‚¤ë³´ë“œ
> SYí‚¤ë³´ë“œëŠ” ê°€ë³ê³ , ì‚¬ìš©í•˜ê¸° ê°„í¸í•œ ë‚˜ëê¸€ í‚¤ë³´ë“œì…ë‹ˆë‹¤. (ì¶”í›„ ë‘ë²Œì‹ í‚¤ë³´ë“œ ì¶”ê°€ ì˜ˆì •)  
> [Figma](https://www.figma.com/design/0i3sNlaez0LG0QMfw80yJ4/SY%ED%82%A4%EB%B3%B4%EB%93%9C?node-id=0-1&t=L8rArjkBX9MJ3UJD-1)
> 
> ê°œë°œ ê¸°ê°„: 2024.07.30 ~ 2025.01.15  
> ë¦¬íŒ©í† ë§ ê¸°ê°„: 2025.07.09 ~ 2025.12.07

<br>

<a href="https://apps.apple.com/kr/app/syí‚¤ë³´ë“œ/id6670792957">
    <img src="https://github.com/user-attachments/assets/dbf89ce7-436b-452f-8319-e411f65a589e">
</a>

<br><br>


## ğŸ‘¥ ëŒ€ìƒ ì‚¬ìš©ì
- ë‚˜ëê¸€ í‚¤ë³´ë“œ/ì²œì§€ì¸ í‚¤ë³´ë“œ(ì˜ˆì •)ë¥¼ ê³„ì† ì‚¬ìš©í•´ ì™”ë˜ ì‚¬ëŒ
- ë‚˜ëê¸€ í‚¤ë³´ë“œ/ì²œì§€ì¸ í‚¤ë³´ë“œ(ì˜ˆì •)ì— ì…ë¬¸í•˜ëŠ” ì‚¬ëŒ
- í•„ìˆ˜ì ì¸ ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•˜ë˜, ê°€ë²¼ìš´ í‚¤ë³´ë“œ ì•±ì„ ì°¾ëŠ” ì‚¬ëŒ

<br><br>


## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ
| ë²”ìœ„ | ê¸°ìˆ  ì´ë¦„ |
|:---------:|:----------|
| ì˜ì¡´ì„± ê´€ë¦¬ ë„êµ¬ | `SPM` |
| í˜•ìƒ ê´€ë¦¬ ë„êµ¬ | `Git`, `GitHub` |
| ë””ìì¸ íŒ¨í„´ | `Delegate`, `Singleton` |
| ì¸í„°í˜ì´ìŠ¤ | `UIKit`, `SwiftUI` |
| í™œìš© API | `Firebase Analytics`, `Firebase Crashlytics`, `Google AdMob` |
| ë‚´ë¶€ ì €ì¥ì†Œ | `UserDefaults` |
| í…ŒìŠ¤íŠ¸ | `Swift Testing` |

<br><br>


## ğŸ”¨ ê°œë°œ í™˜ê²½
![Static Badge](https://img.shields.io/badge/Swift%205-%23F05138?logo=swift&logoColor=white)
![Static Badge](https://img.shields.io/badge/Xcode%2016%20~-%23147EFB?logo=xcode&logoColor=white)
![Static Badge](https://img.shields.io/badge/16%20~%20-%23000000?logo=ios&logoColor=white)

<br><br>


## ğŸ‘¨â€ğŸ’» íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### ë³µì¡í–ˆë˜ ë²„íŠ¼ ì½”ë“œ
#### SwiftUIë¡œ ìµœì´ˆ ê°œë°œ
ì²« iOS í”„ë¡œì íŠ¸ì¸ SYí‚¤ë³´ë“œë¥¼ SwiftUIë¡œ ê°œë°œí•˜ì—¬ 1ì›”ì— ì¶œì‹œí•˜ì˜€ë‹¤.  
í•˜ì§€ë§Œ Swift ì–¸ì–´ë¥¼ ë‹¤ë£¨ëŠ” ë°ì— ë¯¸ìˆ™í–ˆë˜ ê²ƒê³¼ UIKitì— ë¹„í•´ ë¶€ì¡±í•œ í„°ì¹˜ ì´ë²¤íŠ¸ ë° ìƒíƒœ ê´€ë¦¬ë¡œ ì¸í•´ í‚¤ë³´ë“œ ë²„íŠ¼ ì½”ë“œê°€ ë§¤ìš° ê¸¸ì–´ì¡Œë‹¤.  
ì´í›„ 4ê°œì›”ê°„ì˜ UIKit ë¶€íŠ¸ìº í”„ë¥¼ ìˆ˜ê°•í•˜ë©° ì–´ëŠ ì •ë„ iOS ì•± ê°œë°œì— ìµìˆ™í•´ì§€ë©´ì„œ, ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ì—ëŠ” SwiftUIë³´ë‹¤ UIKitì´ ì í•©í•¨ì„ ì•Œê²Œ ë˜ì—ˆë‹¤.  
ë¯¸ìˆ™í–ˆë˜ ê°œë°œ ì‹¤ë ¥ê³¼ SwiftUIì˜ íŠ¹ì§•ì´ ë§ë¬¼ë ¤ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë ¤ì› ë˜ SYí‚¤ë³´ë“œì˜ UIKit ë¦¬íŒ©í† ë§ì„ ìƒê°í•˜ê²Œ ë˜ì—ˆê³ , ë¶€íŠ¸ìº í”„ ìˆ˜ë£Œ ì´í›„ ì§„í–‰í•˜ì˜€ë‹¤.

<br>

#### SwiftUI â¡ï¸ UIKit ë¦¬íŒ©í† ë§
##### ë©”ì¸ ì•±
SYí‚¤ë³´ë“œì˜ ë©”ì¸ ì•±ì€ í‚¤ë³´ë“œ ì„¤ì • ìœ„ì£¼ì˜ ë‹¨ìˆœí•œ êµ¬ì¡°ì´ë¯€ë¡œ ê¸°ì¡´ SwiftUIë¥¼ ìœ ì§€í•˜ë©´ì„œ ê°œì„ ì— ëª©ì ì„ ë‘ì—ˆë‹¤.  

##### Keyboard Extension
Keyboard Extension ë¶€ë¶„ì€ SwiftUIì—ì„œ UIKitìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í–ˆë‹¤.  
ë¦¬íŒ©í† ë§ì„ ê±°ì¹˜ë©° ì˜ì–´ í‚¤ë³´ë“œë¥¼ ì¶”ê°€í•˜ì˜€ê³ , ì²œì§€ì¸ í‚¤ë³´ë“œë„ ë‹¤ìŒ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ê¸°ë³¸ì ì¸ UIë¥¼ ë§Œë“¤ì–´ ë‘ì—ˆë‹¤.  
ë˜í•œ, ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ê°€ì ¸ì™€ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í–ˆë˜ í•œê¸€ ì˜¤í† ë§ˆíƒ€ ì½”ë“œë„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë§Œë“¤ê¸°ë¡œ ê²°ì •í–ˆë‹¤.  

<br>

#### UIKit ë¦¬íŒ©í† ë§ ì‘ì—…
SwiftUIì—ì„œëŠ” `Button`ì˜ `action`ì´ `touchUpInside` ê¸°ì¤€ìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆì–´ì„œ, Gestureë¥¼ ì‚¬ìš©í•˜ì—¬ ìš°íšŒì ìœ¼ë¡œ ë‹¤ë¥¸ ì´ë²¤íŠ¸ë“¤ì„ êµ¬í˜„í•´ì•¼ í–ˆë‹¤.  
í•˜ì§€ë§Œ UIKitì—ì„œëŠ” `addTarget` í˜¹ì€ `addAction`ì˜ `UIControlEvents`ë¥¼ í†µí•´ `touchDown`, `touchUpInside`, `touchDownRepeat`ë¡œ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆì—ˆë‹¤.  
ë˜í•œ ë²„íŠ¼ì´ ëˆŒë ¸ì„ ë•Œ(`highlighted`, `selected`)ì— ëŒ€í•œ ìƒíƒœ ë³€ê²½ë„ ë” ì§ê´€ì ì´ì—ˆë‹¤.  

<details>
    <summary>ê¸°ì¡´ SwiftUI</summary>
    <div markdown="1">
        
``` swift
// KeyboardButton êµ¬ì¡°ì²´ì˜ ì¼ë¶€
Button(action: {}) {
            // Image ë²„íŠ¼ë“¤
            if systemName != nil {
                if systemName == "return.left" {  // ë¦¬í„´ ë²„íŠ¼
                    if state.returnButtonType == .default {
                        Image(systemName: "return.left")
                            .frame(maxWidth: .infinity, maxHeight: .infinity, alignment: .center)
                            .font(.system(size: imageSize))
                            .foregroundStyle(Color(uiColor: UIColor.label))
                            .background(checkPressed() ? Color("PrimaryKeyboardButton") : Color("SecondaryKeyboardButton"))
            // ...(ì¤‘ëµ)...
        .highPriorityGesture(
            LongPressGesture(minimumDuration: 0)
                .onEnded({ _ in
                    // ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
                    os_log("LongPressGesture() onEnded: pressed", log: log, type: .debug)
                    gesturePressed()
                })
        )
        .simultaneousGesture(
            LongPressGesture(minimumDuration: state.longPressDuration, maximumDistance: cursorActiveDistance)
            // ë²„íŠ¼ ê¸¸ê²Œ ëˆŒë €ì„ ë•Œ
                .onEnded({ _ in
                    os_log("simultaneous_LongPressGesture() onEnded: longPressed", log: log, type: .debug)
                    gestureLongPressed()
                })
                .sequenced(before: DragGesture(minimumDistance: 10, coordinateSpace: .global))
            // ë²„íŠ¼ ê¸¸ê²Œ ëˆ„ë¥´ê³  ë“œë˜ê·¸ì‹œ í˜¸ì¶œ
                .onChanged({ value in
                    switch value {
                    case .first(_):
                        break
                    case .second(_, let dragValue):
                        if let value = dragValue {
                            os_log("LongPressGesture()->DragGesture() onChanged: longPressedDrag", log: log, type: .debug)
                            gestureLongPressedDrag(dragGestureValue: value)
                        }
                    }
                })
                .exclusively(before: DragGesture(minimumDistance: cursorActiveDistance, coordinateSpace: .global)
                             // ë²„íŠ¼ ë“œë˜ê·¸ í•  ë•Œ
                    .onChanged({ value in
                        os_log("exclusively_DragGesture() onChanged: drag", log: log, type: .debug)
                        gestureDrag(dragGestureValue: value)
                    })
                            )
        )
        .simultaneousGesture(
            DragGesture(minimumDistance: 0)
            // ë²„íŠ¼ ë—ì„ ë•Œ
                .onEnded({ _ in
                    os_log("DragGesture() onEnded: released", log: log, type: .debug)
                    gestureReleased()
                })
        )
```
</details>

<details>
    <summary>UIKit ë¦¬íŒ©í† ë§ ì´í›„</summary>
    <div markdown="1">

``` swift
// BaseKeyboardViewController í´ë˜ìŠ¤ì˜ ì¼ë¶€
func addInputActionToTextInterableButton(_ button: TextInteractable) {
    let inputAction = UIAction { [weak self] _ in
        guard let self,
              let currentPressedButton = buttonStateController.currentPressedButton,
              currentPressedButton === button else { return }
        performTextInteraction(for: button.button)
    }
    if button is DeleteButton {
        button.addAction(inputAction, for: .touchDown)
    } else {
        button.addAction(inputAction, for: .touchUpInside)
    }
}

// ButtonStateController í´ë˜ìŠ¤ì˜ ì¼ë¶€
func setFeedbackActionToButtons(_ buttonList: [BaseKeyboardButton]) {
    buttonList.forEach { button in
        let playFeedbackAndSetPressed: UIAction
        if button is ShiftButton {
            playFeedbackAndSetPressed = UIAction { [weak self] _ in
                guard let self else { return }
                
                if let previousButton = currentPressedButton, previousButton != button {
                    previousButton.sendActions(for: .touchUpInside)
                }
                
                isShiftButtonPressed = true
                button.playFeedback()
            }
        } else {
            playFeedbackAndSetPressed = UIAction { [weak self] _ in
                guard let self else { return }
                
                if let previousButton = currentPressedButton, previousButton != button {
                    previousButton.sendActions(for: .touchUpInside)
                }
                
                currentPressedButton = button
                button.playFeedback()
            }
        }
        button.addAction(playFeedbackAndSetPressed, for: .touchDown)
    }
}

// PrimaryButton í´ë˜ìŠ¤ì˜ ì¼ë¶€
func setStyles() {
        self.configurationUpdateHandler = { [weak self] button in
            guard let self else { return }
            switch button.state {
            case .normal:
                backgroundView.backgroundColor = .primaryButton
            case .highlighted:
                backgroundView.backgroundColor = isPressed ? .primaryButtonPressed : .primaryButton
            case .selected:
                backgroundView.backgroundColor = .primaryButtonPressed
            default:
                break
            }
        }
    }
```
</details>

<br>

#### ê²°ë¡  ë° íšŒê³ 
ëª…ë ¹í˜• í”„ë ˆì„ì›Œí¬ì¸ UIKitìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ë³µì¡í•œ ë²„íŠ¼, ì œìŠ¤ì²˜ ë¡œì§ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, ì„ ì–¸í˜• í”„ë ˆì„ì›Œí¬ì¸ SwiftUIë³´ë‹¤ UI êµ¬í˜„ ì½”ë“œëŠ” ë” ê¸¸ì–´ì§€ê²Œ ë˜ì—ˆë‹¤.  
í˜„ì¬ë¡œì„  UIKitì´ SwiftUIë³´ë‹¤ ì„¸ë°€í•œ ì»¤ìŠ¤í…€ì´ ê°€ëŠ¥í•œ ì¥ì ì´ ìˆì–´ SYí‚¤ë³´ë“œì—ëŠ” UIKitì´ ì¢€ë” ì í•©í•˜ë‹¤ê³  ìƒê°ëœë‹¤.  
ìµœê·¼ WWDCì—ì„œ SwiftUI ìœ„ì£¼ì˜ ì—…ë°ì´íŠ¸ê°€ ê³„ì† ë°œí‘œë˜ê³  ìˆìœ¼ë‹ˆ, ë‚˜ì¤‘ì—ëŠ” ë” ì»¤ìŠ¤í…€í•˜ê¸° í¸í•˜ê²Œ SwiftUIê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤!  
ê·¸ë ‡ê²Œ ëœë‹¤ë©´ ë‹¤ì‹œ UIKitì—ì„œ SwiftUIë¡œ ë¦¬íŒ©í† ë§ì„ í•˜ì—¬ ì§€ê¸ˆë³´ë‹¤ë„ ë” ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì— ì¢‹ì€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

<br>

---

<br>

### í‚¤ë³´ë“œ ë†’ì´ ì œì•½ì¡°ê±´ ì§€ì • ì‹œ í‚¤ë³´ë“œ í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜ ê¸€ë¦¬ì¹­ í˜„ìƒ
#### ë¬¸ì œ ìƒí™©
|    ì„¤ëª…    |   ìŠ¤í¬ë¦°ìƒ·   |
| :-------------: | :----------: |
| ì• ë‹ˆë©”ì´ì…˜<br>ê¸€ë¦¬ì¹­ | <img src = "https://github.com/user-attachments/assets/4a33c68c-40f8-43d7-a968-d539f51a7ccf" width ="250"> |

ì• í”Œ ê³µì‹ ë¬¸ì„œ([ë ˆê±°ì‹œ](https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/CustomKeyboard.html), [ìµœì‹ ](https://developer.apple.com/documentation/uikit/configuring-a-custom-keyboard-interface#Adapt-to-different-layouts)) ê¸°ë°˜ìœ¼ë¡œ í‚¤ë³´ë“œ ë†’ì´ ì¡°ì ˆ ì½”ë“œë¥¼ êµ¬í˜„í–ˆì„ ë•Œ, ìœ„ GIFì²˜ëŸ¼ í‚¤ë³´ë“œê°€ ì ê¹ë™ì•ˆ ë†’ì´ íŠ€ì–´ì˜¤ë¥´ëŠ” í˜„ìƒì´ ë°œìƒí•˜ì˜€ë‹¤.
``` swift
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    setKeyboardHeight()
    FeedbackManager.shared.prepareHaptic()
}
  
func setKeyboardHeight() {
    let heightConstraint = self.view.heightAnchor.constraint(equalToConstant: UserDefaultsManager.shared.keyboardHeight)
    heightConstraint.priority = .init(999)
    heightConstraint.isActive = true
}
```
- viewë¥¼ ìœ„í•œ ì• ë‹ˆë©”ì´ì…˜ì´ êµ¬ì„±ë˜ê¸° ì§ì „ì¸ `viewWillAppear` ë©”ì„œë“œì— ë†’ì´ ì œì•½ì¡°ê±´ ì½”ë“œ êµ¬í˜„

<br>

#### ì›ì¸ ë¶„ì„
ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì°¾ì•„ë³´ë˜ ì¤‘ Stack Overflowì˜ í•œ [ì§ˆë¬¸ê¸€ì˜ ë‹µë³€](https://stackoverflow.com/a/62114742)ì—ì„œ íŒíŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.
``` swift
private var constraintsHaveBeenAdded = false

override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    initKeyboardConstraints()
}

private func initKeyboardConstraints() {
    if constraintsHaveBeenAdded { return }
    guard let superview = view.superview else { return }
    view.translatesAutoresizingMaskIntoConstraints = false
    view.leftAnchor.constraint(equalTo: superview.leftAnchor).isActive = true
    view.bottomAnchor.constraint(equalTo: superview.bottomAnchor).isActive = true
    view.rightAnchor.constraint(equalTo: superview.rightAnchor).isActive = true
    view.heightAnchor.constraint(equalToConstant: 250.0).isActive = true
    constraintsHaveBeenAdded = true
}
```
> 1. ì œì•½ì¡°ê±´ì´ ì„¤ì •ë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ” í”Œë˜ê·¸ ë³€ìˆ˜ `constraintsHaveBeenAdded` ì„¤ì •
> 2. ì œì•½ì¡°ê±´ì´ ì´ë¯¸ ì„¤ì •ë˜ì—ˆê±°ë‚˜, ìƒìœ„ viewê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ì‹¤í–‰ X (ë°©ì–´ ì½”ë“œ)
> 3. **viewì˜ ëª¨ë“  edgeì— ëŒ€í•´ ìƒìœ„ viewì™€ ê°™ë„ë¡ ì œì•½ì¡°ê±´ ì„¤ì •**
> 4. `constraintsHaveBeenAdded`ë¥¼ trueë¡œ ì„¤ì •  

- ì´ì „ ì½”ë“œì—ì„œëŠ” viewì˜ ëª¨ë“  edgeì— ëŒ€í•´ ìƒìœ„ viewì™€ ê°™ë„ë¡ ì œì•½ì¡°ê±´ì„ ì„¤ì •í•˜ëŠ” ì½”ë“œ(`$0.edges.equalToSuperview()`)ì™€ `translatesAutoresizingMaskIntoConstraints`ë¥¼ `false`ë¡œ ì„¤ì •í•˜ëŠ” ì½”ë“œê°€ ì—†ì—ˆìŒ
- ì´ë¡œ ì¸í•´ Autoresizing Maskë¡œ viewì˜ í¬ê¸°ì™€ ìœ„ì¹˜ë¥¼ ì •í•˜ë ¤ í•˜ëŠ” ê³¼ì •ì—ì„œ Auto Layoutì˜ ë†’ì´ ì œì•½ì¡°ê±´ì´ ì¶©ëŒì„ ì¼ìœ¼ì¼œ ì• ë‹ˆë©”ì´ì…˜ì— ê¸€ë¦¬ì¹­ì´ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì¶”ì¸¡
- `translatesAutoresizingMaskIntoConstraints`ë§Œ `false`ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš° ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ UIê°€ ì¹˜ìš°ì¹˜ëŠ” í˜„ìƒì´ ë°œìƒí•¨
  
|    ì„¤ëª…    |   ìŠ¤í¬ë¦°ìƒ·   |
| :-------------: | :----------: |
| UI ì¹˜ìš°ì¹¨ | <img src = "https://github.com/user-attachments/assets/5198d906-e813-4e79-b537-300e96bb52c2" width ="250"> |

<br>

#### í•´ê²° ê³¼ì •
ìœ„ ë‹µë³€ì„ í† ëŒ€ë¡œ ë†’ì´ ì œì•½ì¡°ê±´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  ë°©ì–´ì½”ë“œë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.
- í‚¤ë³´ë“œ ê°€ë¡œëª¨ë“œ ëŒ€ì‘ ì½”ë“œë„ ì¶”ê°€ëœ ìƒíƒœ
``` swift
func setKeyboardHeight() {
    let keyboardHeight: CGFloat
    if let orientation = self.view.window?.windowScene?.effectiveGeometry.interfaceOrientation {
        keyboardHeight = orientation == .portrait ? UserDefaultsManager.shared.keyboardHeight : KeyboardLayoutFigure.landscapeKeyboardHeight
    } else {
        if !isPreview {
            assertionFailure("Viewê°€ window ê³„ì¸µì— ì—†ìŠµë‹ˆë‹¤.")
        }
        keyboardHeight = UserDefaultsManager.shared.keyboardHeight
    }
    
    if let keyboardHeightConstraint {
        keyboardHeightConstraint.constant = keyboardHeight
    } else {
        let constraint = self.view.heightAnchor.constraint(equalToConstant: keyboardHeight)
        constraint.priority = .init(999)
        constraint.isActive = true
        
        keyboardHeightConstraint = constraint
    }
}
```

|    ì„¤ëª…    |   ìŠ¤í¬ë¦°ìƒ·   |
| :-------------: | :----------: |
| í•´ê²° ì´í›„ | <img src = "https://github.com/user-attachments/assets/be7f5279-7b22-4dcd-830e-85a98ad7141a" width ="250"> |

ì¶œì²˜: [Stack Overflow - iOS 8 Custom Keyboard: Changing the height without warning 'Unable to simultaneously satisfy constraints...'](https://stackoverflow.com/questions/26569476/ios-8-custom-keyboard-changing-the-height-without-warning-unable-to-simultaneo)

<br>

---

<br>


### í‚¤ë³´ë“œ ê°€ì¥ìë¦¬ í„°ì¹˜ ë”œë ˆì´
#### ë¬¸ì œ ìƒí™©
|    ì„¤ëª…    |   ìŠ¤í¬ë¦°ìƒ·   |
| :-------------: | :----------: |
| í„°ì¹˜ ë”œë ˆì´<br>ì˜ì—­ | <img src = "https://github.com/user-attachments/assets/31aed9f1-ac3b-4839-aa42-b7a21e0693ab" width ="250"> |

ì‹¤ ê¸°ê¸°ì—ì„œ í‚¤ë³´ë“œ í…ŒìŠ¤íŠ¸ ë„ì¤‘ ìœ„ ì‚¬ì§„ì˜ ë¹¨ê°„ìƒ‰ ë„¤ëª¨ ì˜ì—­ì„ í„°ì¹˜í•  ë•Œ ë”œë ˆì´ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ ë°œê²¬í–ˆë‹¤.
- ë‹¨ì¼ í„°ì¹˜ ì‹œ ì¸ì‹ê¹Œì§€ ë”œë ˆì´ ì¡´ì¬, ë°˜ë³µ í„°ì¹˜ ì‹œ ì†ê°€ë½ì„ ë—„ ë•Œë§Œ ë°˜ì‘

<br>

#### ì›ì¸ ë¶„ì„
<img width="785" height="159" alt="image" src="https://github.com/user-attachments/assets/7581e20e-d7e7-4fa4-a486-180576543ea4" />

> 1. í‚¤ë³´ë“œ ì•±ì´ ì‹¤í–‰ë˜ë©´ `viewWillAppear` ë‹¨ê³„ì—ì„œ `self.view.window`ë¥¼ í¬í•¨í•œ ëª¨ë“  `UIView`ì— ì•±ì˜ `UIWindow`ê°€ í• ë‹¹ë¨
> 2. ì´ë•Œ `UIWindow`ì— ìˆëŠ” 2ê°œì˜ `UISystemGestureGateGestureRecognizer`ê°€ í™”ë©´ í•˜ë‹¨ì˜ ì œìŠ¤ì²˜ ë°” í˜¹ì€ í™”ë©´ ì™¼ìª½, ì˜¤ë¥¸ìª½ ëª¨ì„œë¦¬ì˜ ì‹œìŠ¤í…œ ì œìŠ¤ì²˜ ì¸ì‹ì„ ë‹´ë‹¹í•¨
> - ì˜ˆ: í™ˆ í™”ë©´ìœ¼ë¡œ ê°€ê¸°, ë’¤ë¡œ ê°€ê¸° ë“±
> 3. ì‚¬ìš©ìê°€ ì‚¬ì§„ì˜ ë¹¨ê°„ìƒ‰ ë„¤ëª¨ ì˜ì—­ì„ í„°ì¹˜
> 4. `UISystemGestureGateGestureRecognizer`ê°€ ì‚¬ì§„ì˜ ë¹¨ê°„ìƒ‰ ë„¤ëª¨ ì˜ì—­ì˜ í„°ì¹˜ë¥¼ í‚¤ë³´ë“œì˜ `UIButton`ë³´ë‹¤ ë¨¼ì € ì¸ì‹
> 5. ì‹œìŠ¤í…œ ì œìŠ¤ì²˜ê°€ ì•„ë‹Œ ê²½ìš°, í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ì†Œë¹„í•˜ì§€ ì•Šê³  í‚¤ë³´ë“œ ë²„íŠ¼ìœ¼ë¡œ ë„˜ê²¨ì¤Œ
> 6. `UIButton`ì˜ `UIControl`ì—ì„œ í„°ì¹˜ ì´ë²¤íŠ¸ ì†Œë¹„

`UISystemGestureGateGestureRecognizer`ê°€ ì‚¬ìš©ìì˜ í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ì‹œìŠ¤í…œ ì œìŠ¤ì²˜ì¸ì§€ íŒë‹¨í•˜ëŠ” ê³¼ì •(4, 5)ì„ ê±°ì¹˜ë©´ì„œ ë”œë ˆì´ê°€ ìƒê¸°ê²Œ ëœë‹¤.

<br>

#### í•´ê²° ê³¼ì •
ì²˜ìŒì—ëŠ” iOS 11ë¶€í„° ì§€ì›í•˜ëŠ” `preferredScreenEdgesDeferringSystemGestures` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•˜ë ¤ í–ˆì§€ë§Œ, `UIInputViewController`ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë“¯ í–ˆë‹¤.  
ê·¸ë˜ì„œ `UISystemGestureGateGestureRecognizer`ì˜ `delaysTouchesBegan`ë¥¼ `false`ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ê²°í•˜ì˜€ë‹¤.
``` swift
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    guard let window = self.view.window else { fatalError("Viewê°€ window ê³„ì¸µì— ì—†ìŠµë‹ˆë‹¤.") }
    let systemGestureRecognizer0 = window.gestureRecognizers?[0] as? UIGestureRecognizer
    let systemGestureRecognizer1 = window.gestureRecognizers?[1] as? UIGestureRecognizer
    systemGestureRecognizer0?.delaysTouchesBegan = false
    systemGestureRecognizer1?.delaysTouchesBegan = false
}
```

> <img width="881" height="67" alt="image" src="https://github.com/user-attachments/assets/2306bfa1-1788-428a-8755-6817e464e48c" />
>
> ì„¤ì • ì´í›„ side effectê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤ëŠ” ê²½ê³  ë©”ì„¸ì§€ê°€ ì½˜ì†”ì°½ì— ëœ¬ë‹¤.  
> ì• í”Œì—ì„œ `UIInputViewController`ì— `preferredScreenEdgesDeferringSystemGestures`ë¥¼ ì§€ì›í•˜ê²Œëœë‹¤ë©´ ìˆ˜ì •í•´ì•¼ê² ë‹¤.

ì¶œì²˜: [Stack Overflow - UISystemGateGestureRecognizer and delayed taps near bottom of screen](https://stackoverflow.com/questions/19799961/uisystemgategesturerecognizer-and-delayed-taps-near-bottom-of-screen)

<br>

---

<br>


## ğŸ“Š ë‹¤ì´ì–´ê·¸ë¨
### í‚¤ë³´ë“œ ì¢…ë¥˜ êµ¬ì¡°
``` mermaid
%%{
  init: {
    "theme": "default",
    "fontFamily": "monospace",
    "elk": {
        "mergeEdges": false,
        "nodePlacementStrategy": "BRANDES_KOEPF",
        "forceNodeModelOrder": false,
        "considerModelOrder": "NODES_AND_EDGES"
    },
    "class": {
        "hideEmptyMembersBox": true
    }
  }
}%%
classDiagram
direction LR
    %% Keyboard Type
    namespace KeyboardGestureController {
      class TextInteractionGestureController
      class SwitchGestureController
    }

    namespace KeyboardGestureProtocol {
      class SwitchGestureHandling
    }

    namespace KeyboardTypeLayoutProtocol {
      class HangeulKeyboardLayoutProvider
      class EnglishKeyboardLayoutProvider
      class SymbolKeyboardLayoutProvider
      class NumericKeyboardLayoutProvider
      class TenkeyKeyboardLayoutProvider
    }

    namespace ParentKeyboardViewController {
      class BaseKeyboardViewController
    }

    namespace FinalKeyboardViewController {
      class HangeulKeyboardViewController
      class EnglishKeyboardViewController
    }

    class NormalKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class PrimaryKeyboardRepresentable:::SYKeyboard_primary { <<protocol>> }
    class HangeulKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class EnglishKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class SymbolKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class NumericKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class TenkeyKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class SwitchGestureHandling:::SYKeyboard_primary { <<protocol>> }

    BaseKeyboardViewController --> PrimaryKeyboardRepresentable: Association
    BaseKeyboardViewController *-- SymbolKeyboardLayoutProvider: Composition
    BaseKeyboardViewController *-- NumericKeyboardLayoutProvider: Composition
    BaseKeyboardViewController *-- TenkeyKeyboardLayoutProvider: Composition

    NormalKeyboardLayoutProvider <|-- PrimaryKeyboardRepresentable: Inheritance
    NormalKeyboardLayoutProvider <|-- SymbolKeyboardLayoutProvider: Inheritance
    NormalKeyboardLayoutProvider <|-- NumericKeyboardLayoutProvider: Inheritance

    BaseKeyboardViewController *-- TextInteractionGestureController: Composition
    BaseKeyboardViewController *-- SwitchGestureController: Composition

    SwitchGestureHandling <|-- NormalKeyboardLayoutProvider: Inheritance
    SwitchGestureController --> SwitchGestureHandling: Association

    BaseKeyboardViewController <|-- HangeulKeyboardViewController: Inheritance
    BaseKeyboardViewController <|-- EnglishKeyboardViewController: Inheritance

    HangeulKeyboardViewController *-- HangeulKeyboardLayoutProvider: Composition
    PrimaryKeyboardRepresentable <|-- HangeulKeyboardLayoutProvider: Inheritance

    EnglishKeyboardViewController *-- EnglishKeyboardLayoutProvider: Composition
    PrimaryKeyboardRepresentable <|-- EnglishKeyboardLayoutProvider: Inheritance

    classDef SYKeyboard_primary fill:#ffa6ed
```

---

### í‚¤ë³´ë“œ ë ˆì´ì•„ì›ƒ êµ¬ì¡°
``` mermaid
%%{
  init: {
    "theme": "default",
    "fontFamily": "monospace",
    "elk": {
        "mergeEdges": false,
        "nodePlacementStrategy": "BRANDES_KOEPF",
        "forceNodeModelOrder": false,
        "considerModelOrder": "NODES_AND_EDGES"
    },
    "class": {
        "hideEmptyMembersBox": true
    }
  }
}%%
classDiagram
direction LR
    %% Keyboard Layout
    namespace KeyboardGestureProtocol {
      class SwitchGestureHandling
    }

    namespace KeyboardTypeLayoutProtocol {
      class HangeulKeyboardLayoutProvider
      class EnglishKeyboardLayoutProvider
      class SymbolKeyboardLayoutProvider
      class NumericKeyboardLayoutProvider
      class TenkeyKeyboardLayoutProvider
    }

    namespace ParentKeyboardView {
      class FourByFourKeyboardView
      class FourByFourPlusKeyboardView
      class StandardKeyboardView
    }

    namespace FinalKeyboardView {
      class NaratgeulKeyboardView
      class CheonjiinKeyboardView
      class EnglishKeyboardView
      class SymbolKeyboardView
      class NumericKeyboardView
      class TenkeyKeyboardView
    }

    class BaseKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class NormalKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class SwitchGestureHandling:::SYKeyboard_primary { <<protocol>> }
    class PrimaryKeyboardRepresentable:::SYKeyboard_primary { <<protocol>> }
    class HangeulKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class EnglishKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class SymbolKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class NumericKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }
    class TenkeyKeyboardLayoutProvider:::SYKeyboard_primary { <<protocol>> }

    BaseKeyboardLayoutProvider <|-- NormalKeyboardLayoutProvider: Inheritance
    SwitchGestureHandling <|-- NormalKeyboardLayoutProvider: Inheritance
    BaseKeyboardLayoutProvider <|-- TenkeyKeyboardLayoutProvider: Inheritance

    NormalKeyboardLayoutProvider <|-- PrimaryKeyboardRepresentable: Inheritance

    TenkeyKeyboardLayoutProvider ..|> TenkeyKeyboardView: Implementation

    PrimaryKeyboardRepresentable <|-- HangeulKeyboardLayoutProvider: Inheritance

    FourByFourKeyboardView <|-- NaratgeulKeyboardView: Inheritance
    HangeulKeyboardLayoutProvider <|.. NaratgeulKeyboardView: Implementation
    FourByFourPlusKeyboardView <|-- CheonjiinKeyboardView: Inheritance
    HangeulKeyboardLayoutProvider <|.. CheonjiinKeyboardView: Implementation

    PrimaryKeyboardRepresentable <|-- EnglishKeyboardLayoutProvider: Inheritance

    EnglishKeyboardLayoutProvider ..|> EnglishKeyboardView: Implementation
    StandardKeyboardView <|-- EnglishKeyboardView: Inheritance

    NormalKeyboardLayoutProvider <|-- SymbolKeyboardLayoutProvider: Inheritance
    SymbolKeyboardLayoutProvider ..|> SymbolKeyboardView: Implementation

    NormalKeyboardLayoutProvider <|-- NumericKeyboardLayoutProvider: Inheritance
    NumericKeyboardLayoutProvider ..|> NumericKeyboardView: Implementation
    
    classDef SYKeyboard_primary fill:#ffa6ed
```

---

### í‚¤ë³´ë“œ ë²„íŠ¼ êµ¬ì¡°
``` mermaid
%%{
  init: {
    "theme": "default",
    "fontFamily": "monospace",
    "elk": {
        "mergeEdges": false,
        "nodePlacementStrategy": "BRANDES_KOEPF",
        "forceNodeModelOrder": false,
        "considerModelOrder": "NODES_AND_EDGES"
    },
    "class": {
        "hideEmptyMembersBox": true
    }
  }
}%%
classDiagram
direction LR
    %% Keyboard Button
    namespace TextInteractionProtocol {
      class TextInteractable
    }

    namespace ParentKeyboardButton {
      class BaseKeyboardButton
      class PrimaryButton
      class SecondaryButton
    }

    namespace FinalKeyboardButton {
      class PrimaryKeyButton
      class SpaceButton
      class SecondaryKeyButton
      class ShiftButton
      class DeleteButton
      class SwitchButton
      class NextKeyboardButton
      class ReturnButton
    }

    class TextInteractable:::SYKeyboard_primary { <<protocol>> }

    BaseKeyboardButton <|-- PrimaryButton: Inheritance
    BaseKeyboardButton <|-- SecondaryButton: Inheritance
    BaseKeyboardButton <|-- TextInteractable: Constraint

    PrimaryButton <|-- PrimaryKeyButton: Inheritance
    PrimaryButton <|-- SpaceButton: Inheritance

    PrimaryKeyButton ..|> TextInteractable: Implementation

    SecondaryButton <|-- DeleteButton: Inheritance
    SecondaryButton <|-- NextKeyboardButton: Inheritance
    SecondaryButton <|-- ReturnButton: Inheritance
    SecondaryButton <|-- SecondaryKeyButton: Inheritance
    SecondaryButton <|-- ShiftButton: Inheritance
    SecondaryButton <|-- SwitchButton: Inheritance

    SecondaryKeyButton ..|> TextInteractable: Implementation

    DeleteButton ..|> TextInteractable: Implementation
    ReturnButton ..|> TextInteractable: Implementation
    SpaceButton ..|> TextInteractable: Implementation

    classDef SYKeyboard_primary fill:#ffa6ed
```

---

<br>


## ğŸ“± ì£¼ìš” ê¸°ëŠ¥
1. **ë‚˜ëê¸€ í‚¤ë³´ë“œ**  
ê¸°ë³¸ì— ì¶©ì‹¤í•œ ë‚˜ëê¸€(EZí•œê¸€) í‚¤ë³´ë“œì…ë‹ˆë‹¤.

<img src = "https://github.com/user-attachments/assets/82f8f17e-821f-4680-be27-fa55c4bd908b" width ="250">

<br><br>


2. **ì²œì§€ì¸ í‚¤ë³´ë“œ**  
ì…ë ¥ì´ í¸ë¦¬í•œ ì²œì§€ì¸ í‚¤ë³´ë“œì…ë‹ˆë‹¤.

<img src = "https://github.com/user-attachments/assets/8f7fb0bf-3e14-4929-b55b-c00884f5ddd7" width ="250">

<br><br>


3. **ë‘ë²Œì‹ í‚¤ë³´ë“œ**
ëŒ€ì¤‘ì ì¸ ë‘ë²Œì‹(í•œê¸€ ì¿¼í‹°) í‚¤ë³´ë“œì…ë‹ˆë‹¤.
(êµ¬í˜„ ì˜ˆì •)

<br><br>


4. **ì˜ì–´ í‚¤ë³´ë“œ**
ëŒ€ì¤‘ì ì¸ ì˜ì–´(QWERTY) í‚¤ë³´ë“œì…ë‹ˆë‹¤.

<img src = "https://github.com/user-attachments/assets/b918f869-a23a-4c0c-953d-7a6a1363b654" width ="250">

<br><br>


5. **ìˆ«ì í‚¤íŒ¨ë“œ íƒ‘ì¬**  
ìˆ«ìë¥¼ ì…ë ¥í•  ë•Œ í° ë²„íŠ¼ìœ¼ë¡œ í¸í•˜ê²Œ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ìˆ«ì ì…ë ¥ ì „ìš© í‚¤íŒ¨ë“œë¥¼ íƒ‘ì¬í–ˆìŠµë‹ˆë‹¤.

<img src="https://github.com/user-attachments/assets/99b11dac-2761-42d2-a54f-d5e440c421cb" width="250">
    
<br><br>


6. **í•œ ì† í‚¤ë³´ë“œ ëª¨ë“œ**  
í•œ ì†ìœ¼ë¡œ í°ì„ ë“¤ê³  ìˆëŠ” ìƒíƒœì—ì„œë„ ì…ë ¥í•˜ê¸° ìˆ˜ì›”í•˜ë„ë¡ í•œ ì† í‚¤ë³´ë“œ ëª¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

<img src="https://github.com/user-attachments/assets/8854953a-d0bd-4615-ad04-caa5c620e3db" width="250">

<br><br>


7. **ë‹¤ì–‘í•˜ê³  ë””í…Œì¼í•œ í‚¤ë³´ë“œ ì„¤ì •**  
ê¸¸ê²Œ ëˆ„ë¥´ê¸° ë™ì‘, ì»¤ì„œ ì´ë™, í‚¤ë³´ë“œ ë†’ì´ ë° í•œ ì† í‚¤ë³´ë“œ ë„ˆë¹„ ì¡°ì ˆ ë“± ì‚¬ìš©ìì˜ í¸ì˜ì— ë§ê²Œ í‚¤ë³´ë“œ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<img src="https://github.com/user-attachments/assets/7163eff8-046c-4c2d-a2d9-1d635dac2cca" width="250">

<br><br>

